<app-bn-tab-view #tabView>
  <bn-tab label="Buy">
    <ng-template #content>
      <ng-container *ngTemplateOutlet="formTemplate; context: {type: 'buy'}"></ng-container>
    </ng-template>
  </bn-tab>
  <bn-tab label="Sell">
    <ng-template #content>
      <ng-container *ngTemplateOutlet="formTemplate; context: {type: 'sell'}"></ng-container>
    </ng-template>
  </bn-tab>
</app-bn-tab-view>

<ng-template #formTemplate let-type="type">
  <form (ngSubmit)="onOrderSubmit()" #orderForm="ngForm" id="market_order">
    <div class="input-group row">
      <label class="col-4 col-form-label" for="type">Type</label>
      <div class="col-8">
        <bn-select [options]="orderTypes" #typeSelect
          (onSelectChange)="selectedOrderType = $event"
          placeholder="Choose a type"></bn-select>
      </div>
    </div>
    <span class="spacer"></span>

    <div class="input-group row">
      <label class="col-4 col-form-label" for="amount">Amount</label>
      <div class="col-8">
        <input (keyup)="calcPrice($event)"
          [(ngModel)]="model.amount"
          class="form-control" name="amount" id="amount"
          type="number" step="0.00000001" pattern="\d*" inputmode="numeric"
          placeholder="{{formatNumber(0,symbols[0])}}"
          readonly />
        <span class="input-group-addon">{{symbols[0]}}</span>
      </div>
    </div>

    <div class="input-group row" *ngIf="selectedOrderType == 'limit'">
      <label class="col-4 col-form-label" for="limit">Limit Price</label>
      <div class="col-8">
        <input (keyup)="calcPrice($event)"
          class="form-control" name="limit" id="limit"
          type="number" step="0.00000001" pattern="\d*" inputmode="numeric"
          placeholder="{{formatNumber(0,symbols[1])}}" />
        <span class="input-group-addon">{{symbols[1]}}</span>
      </div>
    </div>

    <div class="input-group row">
      <label class="col-4 col-form-label" for="total">Total</label>
      <div class="col-8">
        <input class="form-control"
          name="total" id="total_calc" type="number"
          step="0.00000001" pattern="\d*" inputmode="numeric"
          placeholder="{{formatNumber(0,symbols[1])}}"
          value="{{formatNumber(totalPrice,symbols[1])}}"
          readonly />
        <span class="input-group-addon">{{symbols[1]}}</span>
      </div>
    </div>
    <span class="spacer"></span>

    <div class="input-group row">

      <!--<button type="submit">-->
        <!--<i *ngIf="type == 'buy'" class="material-icons">add</i>-->
        <!--<i *ngIf="type == 'sell'" class="material-icons">remove</i>-->
        <!--{{selectedOrderType}} {{type}}-->
      <!--</button>-->

      <button *ngIf="type == 'buy'" type="submit">
        <i class="material-icons">add</i>
        Accept Order
      </button>

      <button *ngIf="type == 'sell'" type="submit">
        <i class="material-icons">remove</i>
        Accept Order
      </button>

    </div>
  </form>
</ng-template>
